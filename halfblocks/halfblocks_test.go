package halfblocks

import (
	// "fmt"
	"image"
	"image/png"
	"os"
	"reflect"
	"testing"
)

func TestHalfblocks(t *testing.T) {
	raw, err := loadImage("./../fixtures/graphics/JigokudaniMonkeyPark.png")
	if err != nil {
		os.Exit(1)
	}

	// Create options
	options := EncoderOptions{
		ColorMode:    3,
		Width:        80,
		Height:       0,
		Threshold:    uint8(128),
		DitherLevel:  0.0,
		UseFgBgOnly:  false,
		InvertColors: false,
		ScaleMode:    "default",
		Symbols:      "half",
	}

	result := Encode(raw, options)

	// TODO: Use a smaller image, it is almost impossible seeing the diff by now
	expected := `[38;2;255;255;255m[48;2;0;0;0mâ–ˆ[0m[38;2;255;255;255m[48;2;0;0;0mâ–ˆ[0m[38;2;255;255;255m[48;2;0;0;0mâ–ˆ[0m[38;2;255;255;255m[48;2;0;0;0mâ–ˆ[0m[38;2;255;255;255m[48;2;0;0;0mâ–ˆ[0m[38;2;255;255;255m[48;2;0;0;0mâ–ˆ[0m[38;2;255;255;255m[48;2;0;0;0mâ–ˆ[0m[38;2;220;233;241m[48;2;0;0;0mâ–ˆ[0m[38;2;184;208;226m[48;2;0;0;0mâ–ˆ[0m[38;2;183;207;224m[48;2;0;0;0mâ–ˆ[0m[38;2;181;205;225m[48;2;0;0;0mâ–ˆ[0m[38;2;179;205;224m[48;2;0;0;0mâ–ˆ[0m[38;2;150;187;215m[48;2;0;0;0mâ–ˆ[0m[38;2;118;165;201m[48;2;0;0;0mâ–ˆ[0m[38;2;126;170;188m[48;2;0;0;0mâ–ˆ[0m[38;2;130;166;164m[48;2;107;156;175mâ–„[0m[38;2;102;146;157m[48;2;92;134;149mâ–€[0m[38;2;101;138;151m[48;2;73;116;142mâ–€[0m[38;2;0;0;0m[48;2;79;118;145m [0m[38;2;115;151;152m[48;2;62;106;135mâ–€[0m[38;2;114;152;145m[48;2;84;122;139mâ–€[0m[38;2;110;141;144m[48;2;77;117;137mâ–„[0m[38;2;83;124;137m[48;2;94;128;138mâ–€[0m[38;2;85;126;135m[48;2;73;106;106mâ–€[0m[38;2;0;0;0m[48;2;58;90;90m [0m[38;2;0;0;0m[48;2;39;65;69m [0m[38;2;0;0;0m[48;2;39;62;67m [0m[38;2;0;0;0m[48;2;48;69;72m [0m[38;2;0;0;0m[48;2;48;69;70m [0m[38;2;0;0;0m[48;2;46;71;66m [0m[38;2;0;0;0m[48;2;50;80;61m [0m[38;2;0;0;0m[48;2;41;67;50m [0m[38;2;0;0;0m[48;2;34;51;48m [0m[38;2;0;0;0m[48;2;35;52;47m [0m[38;2;69;100;60m[48;2;62;92;62mâ–„[0m[38;2;84;127;65m[48;2;96;136;77mâ–„[0m[38;2;0;0;0m[48;2;75;105;64m [0m[38;2;0;0;0m[48;2;45;64;45m [0m[38;2;0;0;0m[48;2;30;43;33m [0m[38;2;0;0;0m[48;2;20;26;21m [0m
[38;2;255;255;255m[48;2;0;0;0mâ–ˆ[0m[38;2;255;255;255m[48;2;0;0;0mâ–ˆ[0m[38;2;255;255;255m[48;2;0;0;0mâ–ˆ[0m[38;2;255;255;255m[48;2;0;0;0mâ–ˆ[0m[38;2;227;236;239m[48;2;0;0;0mâ–ˆ[0m[38;2;185;208;217m[48;2;0;0;0mâ–ˆ[0m[38;2;140;178;199m[48;2;0;0;0mâ–ˆ[0m[38;2;108;155;191m[48;2;97;145;184mâ–€[0m[38;2;126;170;194m[48;2;83;131;180mâ–€[0m[38;2;136;178;194m[48;2;92;141;180mâ–€[0m[38;2;112;159;188m[48;2;89;138;167mâ–€[0m[38;2;95;144;175m[48;2;88;132;154mâ–€[0m[38;2;110;145;157m[48;2;92;136;160mâ–„[0m[38;2;114;151;158m[48;2;99;137;151mâ–€[0m[38;2;104;141;154m[48;2;82;125;145mâ–€[0m[38;2;87;124;150m[48;2;75;117;141mâ–€[0m[38;2;81;118;146m[48;2;59;100;134mâ–€[0m[38;2;96;121;150m[48;2;55;98;138mâ–„[0m[38;2;113;135;150m[48;2;62;102;137mâ–„[0m[38;2;100;132;138m[48;2;82;116;138mâ–„[0m[38;2;88;126;134m[48;2;92;129;137mâ–„[0m[38;2;106;142;140m[48;2;57;87;94mâ–€[0m[38;2;107;141;125m[48;2;50;72;69mâ–€[0m[38;2;0;0;0m[48;2;60;88;79m [0m[38;2;0;0;0m[48;2;44;68;67m [0m[38;2;0;0;0m[48;2;46;69;68m [0m[38;2;0;0;0m[48;2;47;67;65m [0m[38;2;0;0;0m[48;2;62;85;73m [0m[38;2;0;0;0m[48;2;56;78;70m [0m[38;2;0;0;0m[48;2;37;54;53m [0m[38;2;0;0;0m[48;2;36;54;49m [0m[38;2;0;0;0m[48;2;29;44;42m [0m[38;2;0;0;0m[48;2;27;41;40m [0m[38;2;0;0;0m[48;2;27;38;39m [0m[38;2;0;0;0m[48;2;33;50;40m [0m[38;2;0;0;0m[48;2;52;81;46m [0m[38;2;80;97;74m[48;2;88;123;76mâ–€[0m[38;2;86;105;84m[48;2;52;73;54mâ–€[0m[38;2;0;0;0m[48;2;30;47;31m [0m[38;2;0;0;0m[48;2;12;18;12m [0m
[38;2;179;196;198m[48;2;74;113;94mâ–€[0m[38;2;255;255;255m[48;2;88;122;109mâ–€[0m[38;2;255;255;255m[48;2;106;141;151mâ–€[0m[38;2;171;198;189m[48;2;0;0;0mâ–ˆ[0m[38;2;128;169;168m[48;2;0;0;0mâ–ˆ[0m[38;2;98;146;176m[48;2;93;137;170mâ–€[0m[38;2;103;151;177m[48;2;78;123;165mâ–€[0m[38;2;115;159;179m[48;2;89;132;156mâ–€[0m[38;2;107;147;163m[48;2;0;0;0mâ–ˆ[0m[38;2;93;136;158m[48;2;103;141;152mâ–€[0m[38;2;123;159;157m[48;2;91;131;147mâ–„[0m[38;2;125;165;155m[48;2;84;123;146mâ–„[0m[38;2;83;124;135m[48;2;86;124;144mâ–„[0m[38;2;91;132;139m[48;2;80;118;138mâ–„[0m[38;2;100;139;141m[48;2;74;112;134mâ–„[0m[38;2;0;0;0m[48;2;92;128;133m [0m[38;2;109;140;144m[48;2;98;128;137mâ–„[0m[38;2;159;175;164m[48;2;149;160;160mâ–„[0m[38;2;172;181;165m[48;2;130;153;146mâ–€[0m[38;2;106;138;138m[48;2;76;117;99mâ–€[0m[38;2;0;0;0m[48;2;76;112;90m [0m[38;2;0;0;0m[48;2;77;107;78m [0m[38;2;0;0;0m[48;2;78;107;77m [0m[38;2;0;0;0m[48;2;53;79;66m [0m[38;2;0;0;0m[48;2;30;48;53m [0m[38;2;0;0;0m[48;2;37;54;56m [0m[38;2;0;0;0m[48;2;40;56;55m [0m[38;2;0;0;0m[48;2;40;59;52m [0m[38;2;0;0;0m[48;2;40;62;49m [0m[38;2;0;0;0m[48;2;50;73;54m [0m[38;2;0;0;0m[48;2;52;73;54m [0m[38;2;0;0;0m[48;2;30;44;39m [0m[38;2;0;0;0m[48;2;34;47;42m [0m[38;2;0;0;0m[48;2;34;48;42m [0m[38;2;0;0;0m[48;2;31;45;38m [0m[38;2;0;0;0m[48;2;48;65;35m [0m[38;2;103;120;89m[48;2;68;86;41mâ–„[0m[38;2;118;139;112m[48;2;81;103;75mâ–„[0m[38;2;0;0;0m[48;2;58;79;60m [0m[38;2;0;0;0m[48;2;15;22;18m [0m
[38;2;112;141;101m[48;2;82;117;98mâ–„[0m[38;2;116;151;101m[48;2;115;141;107mâ–€[0m[38;2;137;175;101m[48;2;65;93;82mâ–€[0m[38;2;100;143;81m[48;2;41;67;64mâ–€[0m[38;2;96;140;115m[48;2;35;57;57mâ–€[0m[38;2;112;155;163m[48;2;55;76;70mâ–€[0m[38;2;97;142;151m[48;2;85;110;106mâ–€[0m[38;2;94;138;141m[48;2;122;151;129mâ–€[0m[38;2;123;156;131m[48;2;89;129;135mâ–„[0m[38;2;108;147;139m[48;2;89;126;128mâ–€[0m[38;2;101;141;134m[48;2;68;105;122mâ–€[0m[38;2;0;0;0m[48;2;77;114;127m [0m[38;2;0;0;0m[48;2;81;119;130m [0m[38;2;112;147;138m[48;2;74;109;134mâ–„[0m[38;2;99;126;138m[48;2;117;147;140mâ–€[0m[38;2;98;122;132m[48;2;93;118;128mâ–€[0m[38;2;99;131;114m[48;2;87;109;124mâ–„[0m[38;2;109;139;124m[48;2;84;122;88mâ–€[0m[38;2;98;134;106m[48;2;47;74;61mâ–€[0m[38;2;0;0;0m[48;2;58;85;70m [0m[38;2;0;0;0m[48;2;74;101;77m [0m[38;2;0;0;0m[48;2;58;80;66m [0m[38;2;0;0;0m[48;2;31;48;50m [0m[38;2;0;0;0m[48;2;28;43;47m [0m[38;2;0;0;0m[48;2;42;54;54m [0m[38;2;114;146;80m[48;2;49;59;60mâ–„[0m[38;2;96;131;71m[48;2;71;100;61mâ–„[0m[38;2;0;0;0m[48;2;78;106;67m [0m[38;2;0;0;0m[48;2;90;123;71m [0m[38;2;0;0;0m[48;2;77;112;61m [0m[38;2;0;0;0m[48;2;57;81;55m [0m[38;2;0;0;0m[48;2;40;60;46m [0m[38;2;82;111;68m[48;2;26;44;38mâ–„[0m[38;2;107;141;84m[48;2;58;93;50mâ–„[0m[38;2;0;0;0m[48;2;71;102;48m [0m[38;2;0;0;0m[48;2;68;93;45m [0m[38;2;138;161;119m[48;2;96;123;51mâ–„[0m[38;2;192;208;187m[48;2;98;126;68mâ–„[0m[38;2;202;219;214m[48;2;87;109;112mâ–„[0m[38;2;101;107;113m[48;2;46;57;66mâ–„[0m
[38;2;0;0;0m[48;2;71;93;86m [0m[38;2;86;115;88m[48;2;77;98;84mâ–€[0m[38;2;113;140;103m[48;2;109;134;105mâ–€[0m[38;2;90;114;93m[48;2;76;100;83mâ–„[0m[38;2;0;0;0m[48;2;42;64;55m [0m[38;2;96;119;85m[48;2;48;73;56mâ–€[0m[38;2;130;158;101m[48;2;44;61;53mâ–€[0m[38;2;120;144;104m[48;2;53;67;58mâ–€[0m[38;2;130;153;118m[48;2;83;103;80mâ–€[0m[38;2;121;145;106m[48;2;102;121;99mâ–€[0m[38;2;0;0;0m[48;2;101;122;103m [0m[38;2;0;0;0m[48;2;93;119;115m [0m[38;2;108;135;130m[48;2;82;115;120mâ–„[0m[38;2;97;128;123m[48;2;77;109;113mâ–„[0m[38;2;0;0;0m[48;2;79;109;102m [0m[38;2;114;146;95m[48;2;90;111;95mâ–€[0m[38;2;110;140;95m[48;2;87;107;85mâ–€[0m[38;2;0;0;0m[48;2;74;100;83m [0m[38;2;0;0;0m[48;2;57;78;69m [0m[38;2;0;0;0m[48;2;50;70;64m [0m[38;2;0;0;0m[48;2;47;66;63m [0m[38;2;0;0;0m[48;2;54;68;69m [0m[38;2;0;0;0m[48;2;53;67;67m [0m[38;2;0;0;0m[48;2;45;61;63m [0m[38;2;135;144;145m[48;2;84;98;94mâ–„[0m[38;2;254;254;253m[48;2;44;59;49mâ–„[0m[38;2;177;179;205m[48;2;42;56;47mâ–„[0m[38;2;133;136;161m[48;2;64;83;58mâ–„[0m[38;2;197;200;197m[48;2;52;73;47mâ–„[0m[38;2;230;231;231m[48;2;57;78;55mâ–„[0m[38;2;226;227;228m[48;2;160;175;155mâ–„[0m[38;2;228;228;229m[48;2;0;0;0mâ–ˆ[0m[38;2;224;224;225m[48;2;0;0;0mâ–ˆ[0m[38;2;187;189;192m[48;2;147;151;158mâ–„[0m[38;2;183;185;185m[48;2;142;144;148mâ–„[0m[38;2;195;195;189m[48;2;0;0;0mâ–ˆ[0m[38;2;163;173;146m[48;2;0;0;0mâ–ˆ[0m[38;2;148;167;121m[48;2;0;0;0mâ–ˆ[0m[38;2;148;167;126m[48;2;122;144;105mâ–€[0m[38;2;78;89;69m[48;2;44;55;42mâ–€[0m
[38;2;121;161;92m[48;2;80;102;89mâ–„[0m[38;2;124;157;109m[48;2;71;93;82mâ–„[0m[38;2;104;129;101m[48;2;46;64;60mâ–„[0m[38;2;105;130;86m[48;2;50;84;47mâ–„[0m[38;2;74;97;62m[48;2;70;103;63mâ–„[0m[38;2;0;0;0m[48;2;46;62;60m [0m[38;2;0;0;0m[48;2;59;77;78m [0m[38;2;0;0;0m[48;2;64;82;89m [0m[38;2;96;116;115m[48;2;116;131;135mâ–€[0m[38;2;126;144;124m[48;2;111;131;120mâ–€[0m[38;2;0;0;0m[48;2;66;87;72m [0m[38;2;132;154;129m[48;2;78;93;111mâ–„[0m[38;2;217;221;199m[48;2;109;129;139mâ–„[0m[38;2;163;183;150m[48;2;0;0;0mâ–ˆ[0m[38;2;170;211;140m[48;2;106;128;100mâ–„[0m[38;2;154;190;123m[48;2;101;124;101mâ–„[0m[38;2;134;172;96m[48;2;89;111;88mâ–„[0m[38;2;88;125;65m[48;2;55;73;57mâ–„[0m[38;2;0;0;0m[48;2;44;63;53m [0m[38;2;0;0;0m[48;2;36;51;52m [0m[38;2;0;0;0m[48;2;33;47;49m [0m[38;2;0;0;0m[48;2;38;53;52m [0m[38;2;0;0;0m[48;2;58;70;65m [0m[38;2;173;177;172m[48;2;146;150;149mâ–€[0m[38;2;242;242;243m[48;2;0;0;0mâ–ˆ[0m[38;2;237;237;237m[48;2;0;0;0mâ–ˆ[0m[38;2;237;236;236m[48;2;0;0;0mâ–ˆ[0m[38;2;234;234;234m[48;2;0;0;0mâ–ˆ[0m[38;2;230;230;230m[48;2;0;0;0mâ–ˆ[0m[38;2;226;226;227m[48;2;0;0;0mâ–ˆ[0m[38;2;226;226;227m[48;2;0;0;0mâ–ˆ[0m[38;2;223;224;226m[48;2;0;0;0mâ–ˆ[0m[38;2;222;222;226m[48;2;0;0;0mâ–ˆ[0m[38;2;225;226;227m[48;2;0;0;0mâ–ˆ[0m[38;2;218;219;220m[48;2;132;133;133mâ–€[0m[38;2;224;224;225m[48;2;35;37;34mâ–€[0m[38;2;177;192;160m[48;2;35;41;33mâ–€[0m[38;2;107;140;70m[48;2;56;74;40mâ–€[0m[38;2;108;144;74m[48;2;68;89;48mâ–€[0m[38;2;63;81;48m[48;2;29;36;24mâ–€[0m
[38;2;85;104;78m[48;2;33;47;44mâ–€[0m[38;2;86;107;82m[48;2;32;46;42mâ–€[0m[38;2;0;0;0m[48;2;35;51;44m [0m[38;2;0;0;0m[48;2;34;50;42m [0m[38;2;0;0;0m[48;2;30;45;41m [0m[38;2;112;110;100m[48;2;56;68;63mâ–„[0m[38;2;151;143;131m[48;2;84;102;83mâ–„[0m[38;2;0;0;0m[48;2;67;79;66m [0m[38;2;0;0;0m[48;2;36;45;41m [0m[38;2;0;0;0m[48;2;45;58;55m [0m[38;2;0;0;0m[48;2;47;70;51m [0m[38;2;95;127;77m[48;2;77;108;69mâ–€[0m[38;2;114;139;99m[48;2;119;144;87mâ–€[0m[38;2;108;133;94m[48;2;115;135;91mâ–€[0m[38;2;152;172;147m[48;2;0;0;0mâ–ˆ[0m[38;2;246;246;241m[48;2;93;118;93mâ–„[0m[38;2;146;156;150m[48;2;52;71;53mâ–„[0m[38;2;0;0;0m[48;2;52;73;60m [0m[38;2;0;0;0m[48;2;58;78;64m [0m[38;2;99;123;87m[48;2;68;84;75mâ–„[0m[38;2;166;176;171m[48;2;113;145;77mâ–€[0m[38;2;242;246;250m[48;2;162;179;141mâ–€[0m[38;2;240;242;245m[48;2;0;0;0mâ–ˆ[0m[38;2;243;243;243m[48;2;138;140;141mâ–„[0m[38;2;144;147;152m[48;2;34;33;33mâ–„[0m[38;2;143;144;144m[48;2;56;61;66mâ–€[0m[38;2;147;151;154m[48;2;69;77;82mâ–€[0m[38;2;0;0;0m[48;2;48;52;57m [0m[38;2;131;133;124m[48;2;52;52;51mâ–€[0m[38;2;226;227;218m[48;2;62;68;55mâ–€[0m[38;2;230;230;229m[48;2;45;48;38mâ–€[0m[38;2;231;231;230m[48;2;33;37;36mâ–€[0m[38;2;145;144;147m[48;2;47;53;55mâ–€[0m[38;2;0;0;0m[48;2;50;53;55m [0m[38;2;93;113;82m[48;2;38;45;38mâ–„[0m[38;2;98;126;78m[48;2;53;74;42mâ–„[0m[38;2;96;126;83m[48;2;93;125;70mâ–€[0m[38;2;120;148;107m[48;2;82;109;61mâ–€[0m[38;2;83;101;64m[48;2;59;80;43mâ–€[0m[38;2;0;0;0m[48;2;33;42;23m [0m
[38;2;179;175;163m[48;2;28;42;38mâ–„[0m[38;2;207;196;165m[48;2;31;44;42mâ–„[0m[38;2;154;149;128m[48;2;41;52;55mâ–„[0m[38;2;135;135;130m[48;2;183;182;164mâ–€[0m[38;2;191;196;165m[48;2;166;165;158mâ–„[0m[38;2;89;103;83m[48;2;80;90;85mâ–„[0m[38;2;0;0;0m[48;2;44;64;50m [0m[38;2;0;0;0m[48;2;44;70;51m [0m[38;2;0;0;0m[48;2;44;68;52m [0m[38;2;0;0;0m[48;2;55;78;65m [0m[38;2;106;118;113m[48;2;43;72;52mâ–„[0m[38;2;111;119;118m[48;2;43;62;51mâ–„[0m[38;2;0;0;0m[48;2;94;103;101m [0m[38;2;0;0;0m[48;2;81;90;87m [0m[38;2;88;114;82m[48;2;79;88;73mâ–€[0m[38;2;119;139;104m[48;2;117;126;113mâ–€[0m[38;2;0;0;0m[48;2;106;109;100m [0m[38;2;104;121;76m[48;2;113;118;120mâ–„[0m[38;2;99;120;80m[48;2;98;109;74mâ–„[0m[38;2;0;0;0m[48;2;62;79;41m [0m[38;2;84;97;69m[48;2;60;76;49mâ–„[0m[38;2;97;103;77m[48;2;48;50;38mâ–„[0m[38;2;148;146;138m[48;2;52;52;42mâ–€[0m[38;2;237;237;237m[48;2;67;63;50mâ–€[0m[38;2;236;235;236m[48;2;72;62;47mâ–€[0m[38;2;237;234;235m[48;2;68;55;43mâ–€[0m[38;2;237;234;234m[48;2;79;65;41mâ–€[0m[38;2;131;130;129m[48;2;67;57;38mâ–€[0m[38;2;136;133;129m[48;2;40;46;50mâ–„[0m[38;2;229;225;221m[48;2;67;74;77mâ–„[0m[38;2;147;151;155m[48;2;52;55;53mâ–„[0m[38;2;77;84;68m[48;2;49;56;61mâ–€[0m[38;2;94;95;74m[48;2;35;36;35mâ–€[0m[38;2;76;98;53m[48;2;82;85;81mâ–„[0m[38;2;108;140;96m[48;2;77;108;52mâ–€[0m[38;2;86;126;49m[48;2;46;70;36mâ–€[0m[38;2;0;0;0m[48;2;56;83;35m [0m[38;2;125;161;97m[48;2;39;57;27mâ–€[0m[38;2;145;182;121m[48;2;89;116;72mâ–€[0m[38;2;56;74;47m[48;2;68;84;58mâ–€[0m
[38;2;88;118;65m[48;2;76;97;65mâ–€[0m[38;2;0;0;0m[48;2;87;105;78m [0m[38;2;110;125;95m[48;2;98;109;99mâ–€[0m[38;2;95;108;79m[48;2;89;101;90mâ–€[0m[38;2;139;142;130m[48;2;70;85;58mâ–„[0m[38;2;171;171;161m[48;2;110;122;88mâ–„[0m[38;2;204;206;206m[48;2;150;142;127mâ–„[0m[38;2;192;179;166m[48;2;147;161;140mâ–€[0m[38;2;163;157;143m[48;2;99;122;73mâ–€[0m[38;2;153;181;122m[48;2;123;121;112mâ–„[0m[38;2;166;173;143m[48;2;0;0;0mâ–ˆ[0m[38;2;163;172;128m[48;2;0;0;0mâ–ˆ[0m[38;2;167;183;121m[48;2;0;0;0mâ–ˆ[0m[38;2;212;216;142m[48;2;119;142;102mâ–„[0m[38;2;210;221;113m[48;2;62;74;64mâ–„[0m[38;2;209;213;83m[48;2;135;132;130mâ–„[0m[38;2;182;193;120m[48;2;0;0;0mâ–ˆ[0m[38;2;120;149;71m[48;2;100;128;80mâ–€[0m[38;2;147;161;126m[48;2;113;144;96mâ–€[0m[38;2;173;186;140m[48;2;114;141;95mâ–€[0m[38;2;119;150;71m[48;2;46;67;32mâ–€[0m[38;2;135;168;83m[48;2;38;57;31mâ–€[0m[38;2;114;133;80m[48;2;42;57;40mâ–€[0m[38;2;0;0;0m[48;2;70;82;66m [0m[38;2;0;0;0m[48;2;84;93;74m [0m[38;2;0;0;0m[48;2;85;81;57m [0m[38;2;0;0;0m[48;2;64;58;41m [0m[38;2;0;0;0m[48;2;48;46;35m [0m[38;2;0;0;0m[48;2;53;50;36m [0m[38;2;0;0;0m[48;2;62;57;43m [0m[38;2;0;0;0m[48;2;60;58;45m [0m[38;2;94;108;100m[48;2;46;42;31mâ–„[0m[38;2;83;93;86m[48;2;40;37;29mâ–„[0m[38;2;84;103;59m[48;2;72;91;69mâ–€[0m[38;2;87;125;56m[48;2;82;117;75mâ–€[0m[38;2;0;0;0m[48;2;48;71;37m [0m[38;2;0;0;0m[48;2;41;51;34m [0m[38;2;0;0;0m[48;2;30;42;21m [0m[38;2;0;0;0m[48;2;52;73;41m [0m[38;2;0;0;0m[48;2;38;52;32m [0m
[38;2;143;150;152m[48;2;48;69;49mâ–„[0m[38;2;182;186;175m[48;2;117;125;109mâ–„[0m[38;2;178;179;162m[48;2;0;0;0mâ–ˆ[0m[38;2;174;175;163m[48;2;160;159;153mâ–€[0m[38;2;186;193;164m[48;2;154;144;136mâ–€[0m[38;2;207;196;181m[48;2;134;138;104mâ–„[0m[38;2;232;221;200m[48;2;154;159;120mâ–„[0m[38;2;202;203;155m[48;2;0;0;0mâ–ˆ[0m[38;2;149;167;87m[48;2;159;177;109mâ–€[0m[38;2;187;199;121m[48;2;116;157;59mâ–€[0m[38;2;178;195;134m[48;2;0;0;0mâ–ˆ[0m[38;2;160;174;126m[48;2;110;128;81mâ–„[0m[38;2;131;158;80m[48;2;108;128;84mâ–„[0m[38;2;185;197;157m[48;2;96;112;81mâ–„[0m[38;2;95;100;85m[48;2;167;174;172mâ–€[0m[38;2;151;157;129m[48;2;149;161;161mâ–€[0m[38;2;156;174;134m[48;2;0;0;0mâ–ˆ[0m[38;2;89;108;67m[48;2;85;114;67mâ–€[0m[38;2;0;0;0m[48;2;54;70;43m [0m[38;2;0;0;0m[48;2;55;78;40m [0m[38;2;0;0;0m[48;2;43;71;27m [0m[38;2;104;141;67m[48;2;31;55;24mâ–€[0m[38;2;123;154;86m[48;2;35;60;24mâ–€[0m[38;2;0;0;0m[48;2;82;109;56m [0m[38;2;109;138;62m[48;2;74;84;60mâ–„[0m[38;2;88;103;67m[48;2;64;66;50mâ–„[0m[38;2;0;0;0m[48;2;58;65;52m [0m[38;2;0;0;0m[48;2;68;77;71m [0m[38;2;0;0;0m[48;2;71;80;79m [0m[38;2;0;0;0m[48;2;79;82;66m [0m[38;2;0;0;0m[48;2;81;79;60m [0m[38;2;0;0;0m[48;2;62;68;56m [0m[38;2;0;0;0m[48;2;53;63;58m [0m[38;2;71;93;72m[48;2;87;105;74mâ–€[0m[38;2;75;105;57m[48;2;69;89;56mâ–€[0m[38;2;0;0;0m[48;2;44;66;31m [0m[38;2;0;0;0m[48;2;73;102;48m [0m[38;2;0;0;0m[48;2;91;126;60m [0m[38;2;0;0;0m[48;2;65;90;43m [0m[38;2;0;0;0m[48;2;19;26;13m [0m
[38;2;182;190;169m[48;2;148;155;114mâ–€[0m[38;2;157;174;124m[48;2;114;123;88mâ–€[0m[38;2;135;168;85m[48;2;154;160;129mâ–€[0m[38;2;176;199;121m[48;2;0;0;0mâ–ˆ[0m[38;2;187;207;132m[48;2;0;0;0mâ–ˆ[0m[38;2;196;205;149m[48;2;0;0;0mâ–ˆ[0m[38;2;196;204;147m[48;2;0;0;0mâ–ˆ[0m[38;2;191;202;137m[48;2;0;0;0mâ–ˆ[0m[38;2;178;195;126m[48;2;0;0;0mâ–ˆ[0m[38;2;167;197;113m[48;2;0;0;0mâ–ˆ[0m[38;2;188;210;147m[48;2;0;0;0mâ–ˆ[0m[38;2;167;189;113m[48;2;161;177;120mâ–„[0m[38;2;152;186;151m[48;2;122;150;92mâ–„[0m[38;2;156;192;209m[48;2;0;0;0mâ–ˆ[0m[38;2;172;196;193m[48;2;0;0;0mâ–ˆ[0m[38;2;163;180;138m[48;2;0;0;0mâ–ˆ[0m[38;2;149;172;117m[48;2;87;104;76mâ–€[0m[38;2;101;122;88m[48;2;18;30;17mâ–€[0m[38;2;0;0;0m[48;2;32;45;31m [0m[38;2;0;0;0m[48;2;31;41;27m [0m[38;2;0;0;0m[48;2;39;48;34m [0m[38;2;0;0;0m[48;2;49;63;42m [0m[38;2;0;0;0m[48;2;56;77;37m [0m[38;2;0;0;0m[48;2;53;67;33m [0m[38;2;0;0;0m[48;2;40;54;31m [0m[38;2;0;0;0m[48;2;37;58;27m [0m[38;2;0;0;0m[48;2;43;56;35m [0m[38;2;0;0;0m[48;2;52;56;48m [0m[38;2;0;0;0m[48;2;53;56;51m [0m[38;2;0;0;0m[48;2;65;68;60m [0m[38;2;0;0;0m[48;2;78;87;64m [0m[38;2;0;0;0m[48;2;79;88;67m [0m[38;2;0;0;0m[48;2;73;80;72m [0m[38;2;110;136;102m[48;2;70;76;71mâ–€[0m[38;2;106;138;92m[48;2;89;102;85mâ–€[0m[38;2;0;0;0m[48;2;74;99;62m [0m[38;2;0;0;0m[48;2;62;91;44m [0m[38;2;0;0;0m[48;2;76;109;52m [0m[38;2;0;0;0m[48;2;81;107;58m [0m[38;2;0;0;0m[48;2;35;43;27m [0m
[38;2;205;214;192m[48;2;0;0;0mâ–ˆ[0m[38;2;225;230;182m[48;2;137;140;131mâ–„[0m[38;2;188;192;155m[48;2;144;140;109mâ–„[0m[38;2;198;196;164m[48;2;0;0;0mâ–ˆ[0m[38;2;236;226;211m[48;2;0;0;0mâ–ˆ[0m[38;2;197;201;165m[48;2;0;0;0mâ–ˆ[0m[38;2;194;201;157m[48;2;0;0;0mâ–ˆ[0m[38;2;203;217;160m[48;2;0;0;0mâ–ˆ[0m[38;2;183;205;131m[48;2;0;0;0mâ–ˆ[0m[38;2;176;197;128m[48;2;0;0;0mâ–ˆ[0m[38;2;191;202;152m[48;2;0;0;0mâ–ˆ[0m[38;2;170;182;114m[48;2;139;148;114mâ–€[0m[38;2;0;0;0m[48;2;67;89;38m [0m[38;2;0;0;0m[48;2;36;49;30m [0m[38;2;72;78;67m[48;2;37;53;31mâ–€[0m[38;2;137;160;113m[48;2;97;103;81mâ–€[0m[38;2;123;141;95m[48;2;130;129;106mâ–€[0m[38;2;0;0;0m[48;2;77;83;62m [0m[38;2;0;0;0m[48;2;62;70;51m [0m[38;2;0;0;0m[48;2;77;79;63m [0m[38;2;0;0;0m[48;2;88;89;73m [0m[38;2;0;0;0m[48;2;76;76;57m [0m[38;2;0;0;0m[48;2;79;74;49m [0m[38;2;0;0;0m[48;2;78;75;51m [0m[38;2;0;0;0m[48;2;52;58;40m [0m[38;2;0;0;0m[48;2;49;55;37m [0m[38;2;0;0;0m[48;2;52;57;44m [0m[38;2;0;0;0m[48;2;50;58;47m [0m[38;2;0;0;0m[48;2;54;60;55m [0m[38;2;0;0;0m[48;2;53;58;56m [0m[38;2;0;0;0m[48;2;56;60;55m [0m[38;2;0;0;0m[48;2;65;72;62m [0m[38;2;0;0;0m[48;2;67;76;69m [0m[38;2;0;0;0m[48;2;69;78;74m [0m[38;2;0;0;0m[48;2;79;92;77m [0m[38;2;92;117;83m[48;2;89;115;64mâ–„[0m[38;2;81;112;72m[48;2;81;117;56mâ–„[0m[38;2;0;0;0m[48;2;52;76;43m [0m[38;2;0;0;0m[48;2;32;46;25m [0m[38;2;0;0;0m[48;2;15;20;11m [0m
[38;2;165;171;168m[48;2;76;114;94mâ–€[0m[38;2;221;228;222m[48;2;165;184;169mâ–€[0m[38;2;217;225;197m[48;2;0;0;0mâ–ˆ[0m[38;2;168;196;134m[48;2;0;0;0mâ–ˆ[0m[38;2;153;187;138m[48;2;125;172;89mâ–„[0m[38;2;114;161;78m[48;2;131;145;107mâ–€[0m[38;2;126;178;58m[48;2;131;137;100mâ–€[0m[38;2;158;178;126m[48;2;108;168;39mâ–„[0m[38;2;137;175;102m[48;2;113;141;93mâ–€[0m[38;2;135;164;103m[48;2;152;179;137mâ–€[0m[38;2;180;195;166m[48;2;82;103;57mâ–„[0m[38;2;156;158;144m[48;2;126;127;117mâ–„[0m[38;2;166;168;155m[48;2;0;0;0mâ–ˆ[0m[38;2;160;162;147m[48;2;0;0;0mâ–ˆ[0m[38;2;152;151;130m[48;2;0;0;0mâ–ˆ[0m[38;2;156;152;129m[48;2;0;0;0mâ–ˆ[0m[38;2;157;146;111m[48;2;136;140;131mâ–€[0m[38;2;136;140;130m[48;2;95;90;75mâ–„[0m[38;2;137;138;121m[48;2;82;83;72mâ–„[0m[38;2;0;0;0m[48;2;92;91;73m [0m[38;2;0;0;0m[48;2;75;78;68m [0m[38;2;0;0;0m[48;2;70;77;68m [0m[38;2;0;0;0m[48;2;56;60;45m [0m[38;2;0;0;0m[48;2;52;57;39m [0m[38;2;0;0;0m[48;2;60;69;47m [0m[38;2;128;146;95m[48;2;71;85;59mâ–„[0m[38;2;138;170;86m[48;2;70;88;59mâ–„[0m[38;2;0;0;0m[48;2;65;89;44m [0m[38;2;114;139;85m[48;2;51;61;51mâ–„[0m[38;2;124;142;102m[48;2;42;51;45mâ–„[0m[38;2;0;0;0m[48;2;64;75;61m [0m[38;2;0;0;0m[48;2;83;87;75m [0m[38;2;0;0;0m[48;2;89;95;89m [0m[38;2;0;0;0m[48;2;72;89;75m [0m[38;2;0;0;0m[48;2;55;75;52m [0m[38;2;0;0;0m[48;2;63;86;59m [0m[38;2;0;0;0m[48;2;56;81;53m [0m[38;2;0;0;0m[48;2;38;60;36m [0m[38;2;0;0;0m[48;2;49;67;47m [0m[38;2;0;0;0m[48;2;29;36;30m [0m
[38;2;131;151;131m[48;2;51;82;52mâ–€[0m[38;2;223;233;222m[48;2;166;188;167mâ–€[0m[38;2;205;229;179m[48;2;0;0;0mâ–ˆ[0m[38;2;189;226;156m[48;2;0;0;0mâ–ˆ[0m[38;2;185;218;162m[48;2;0;0;0mâ–ˆ[0m[38;2;154;187;131m[48;2;0;0;0mâ–ˆ[0m[38;2;115;147;92m[48;2;84;112;59mâ–€[0m[38;2;150;173;122m[48;2;78;130;11mâ–€[0m[38;2;173;223;109m[48;2;75;126;11mâ–€[0m[38;2;82;130;26m[48;2;78;109;42mâ–€[0m[38;2;118;142;88m[48;2;57;83;36mâ–„[0m[38;2;90;129;51m[48;2;157;175;136mâ–€[0m[38;2;180;185;145m[48;2;104;132;66mâ–„[0m[38;2;152;134;106m[48;2;91;105;64mâ–„[0m[38;2;0;0;0m[48;2;103;87;67m [0m[38;2;95;91;82m[48;2;144;108;90mâ–€[0m[38;2;151;151;124m[48;2;0;0;0mâ–ˆ[0m[38;2;165;166;151m[48;2;118;156;80mâ–€[0m[38;2;170;167;145m[48;2;148;176;111mâ–€[0m[38;2;183;178;161m[48;2;150;150;130mâ–€[0m[38;2;207;205;197m[48;2;82;80;74mâ–€[0m[38;2;141;142;133m[48;2;63;64;56mâ–€[0m[38;2;150;152;126m[48;2;53;54;45mâ–„[0m[38;2;205;211;159m[48;2;51;54;41mâ–„[0m[38;2;118;129;91m[48;2;62;67;50mâ–„[0m[38;2;0;0;0m[48;2;75;79;64m [0m[38;2;0;0;0m[48;2;73;75;64m [0m[38;2;0;0;0m[48;2;61;68;56m [0m[38;2;103;126;72m[48;2;64;73;66mâ–€[0m[38;2;99;127;58m[48;2;63;68;56mâ–€[0m[38;2;0;0;0m[48;2;51;62;33m [0m[38;2;0;0;0m[48;2;69;80;48m [0m[38;2;0;0;0m[48;2;91;105;64m [0m[38;2;0;0;0m[48;2;90;107;66m [0m[38;2;0;0;0m[48;2;84;104;58m [0m[38;2;136;162;103m[48;2;59;64;49mâ–„[0m[38;2;132;156;108m[48;2;87;97;63mâ–„[0m[38;2;0;0;0m[48;2;91;117;62m [0m[38;2;0;0;0m[48;2;58;81;42m [0m[38;2;0;0;0m[48;2;20;29;16m [0m
[38;2;155;180;54m[48;2;50;76;50mâ–„[0m[38;2;133;167;76m[48;2;84;118;74mâ–„[0m[38;2;124;152;99m[48;2;146;171;153mâ–€[0m[38;2;157;185;127m[48;2;0;0;0mâ–ˆ[0m[38;2;88;133;41m[48;2;125;147;103mâ–€[0m[38;2;101;154;35m[48;2;56;95;30mâ–„[0m[38;2;122;165;100m[48;2;65;123;16mâ–€[0m[38;2;109;141;98m[48;2;39;70;39mâ–€[0m[38;2;127;143;124m[48;2;66;84;67mâ–„[0m[38;2;142;161;147m[48;2;161;175;157mâ–€[0m[38;2;107;135;103m[48;2;144;165;148mâ–€[0m[38;2;213;222;216m[48;2;111;128;115mâ–„[0m[38;2;214;220;214m[48;2;0;0;0mâ–ˆ[0m[38;2;210;222;198m[48;2;129;139;122mâ–€[0m[38;2;137;133;114m[48;2;69;71;57mâ–€[0m[38;2;96;112;58m[48;2;63;80;27mâ–„[0m[38;2;86;138;40m[48;2;84;119;43mâ–€[0m[38;2;100;141;64m[48;2;54;81;37mâ–€[0m[38;2;111;151;73m[48;2;48;79;37mâ–€[0m[38;2;140;192;76m[48;2;57;98;39mâ–€[0m[38;2;125;174;65m[48;2;92;138;47mâ–€[0m[38;2;161;170;110m[48;2;93;117;55mâ–„[0m[38;2;195;182;157m[48;2;144;135;112mâ–„[0m[38;2;181;164;146m[48;2;148;143;102mâ–€[0m[38;2;189;177;157m[48;2;133;116;88mâ–€[0m[38;2;195;182;160m[48;2;0;0;0mâ–ˆ[0m[38;2;203;189;160m[48;2;113;114;98mâ–„[0m[38;2;203;190;168m[48;2;70;69;54mâ–„[0m[38;2;163;155;132m[48;2;84;78;52mâ–„[0m[38;2;140;137;109m[48;2;82;83;58mâ–„[0m[38;2;150;165;128m[48;2;79;85;65mâ–„[0m[38;2;132;165;75m[48;2;67;71;46mâ–„[0m[38;2;146;190;60m[48;2;68;76;38mâ–„[0m[38;2;96;123;57m[48;2;127;174;70mâ–€[0m[38;2;110;155;70m[48;2;107;155;62mâ–€[0m[38;2;91;134;56m[48;2;93;140;56mâ–„[0m[38;2;104;148;67m[48;2;68;104;43mâ–€[0m[38;2;100;145;68m[48;2;89;123;59mâ–€[0m[38;2;0;0;0m[48;2;75;111;51m [0m[38;2;0;0;0m[48;2;29;46;19m [0m
`

	if !reflect.DeepEqual(result, expected) {
		t.Errorf("Halfblocks does not match = %v, want %v", result, expected)
	}

	// fmt.Println(result)
}

func loadImage(path string) (image.Image, error) {
	f, err := os.Open(path)
	if err != nil {
		return nil, err
	}
	return png.Decode(f)
}